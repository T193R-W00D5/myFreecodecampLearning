name: Test Staging Deployment

on:
  workflow_dispatch:

jobs:
  test-staging:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create simple test file
        run: |
          mkdir -p test-deploy
          echo "<!DOCTYPE html>
          <html>
          <head><title>Staging Test</title></head>
          <body>
          <h1>Staging Test - $(date)</h1>
          <p>If you see this, staging deployment is working!</p>
          </body>
          </html>" > test-deploy/index.html

      - name: Deploy test to staging
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./test-deploy
          destination_dir: staging-test
          
      - name: Deployment info
        run: |
          echo "## ðŸ§ª Test Deployment Complete" >> $GITHUB_STEP_SUMMARY
          echo "Test URL: https://t193r-w00d5.github.io/myFreecodecampLearning/staging-test" >> $GITHUB_STEP_SUMMARY